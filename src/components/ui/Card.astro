---
/**
 * Glassmorphic card component with hover effects
 */
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
	title?: string;
	description?: string;
	image?: ImageMetadata;
	href?: string;
	class?: string;
}

const { title, description, image, href, class: className = '' } = Astro.props;
const Tag = href ? 'a' : 'div';
---

<Tag class:list={['card', { 'card-link': !!href }, className]} href={href}>
	{image && (
		<div class="card-image">
			<Image src={image} alt={title || ''} width={400} height={225} />
		</div>
	)}
	<div class="card-content">
		{title && <h3 class="card-title">{title}</h3>}
		{description && <p class="card-description">{description}</p>}
		<slot />
	</div>
</Tag>

<style>
	.card {
		display: block;
		background: rgba(255, 255, 255, 0.7);
		backdrop-filter: blur(var(--blur-md));
		-webkit-backdrop-filter: blur(var(--blur-md));
		border: 1px solid rgba(255, 255, 255, 0.3);
		border-radius: var(--radius-xl);
		overflow: hidden;
		transition: all var(--transition-base);
	}

	.card-link {
		text-decoration: none;
		color: inherit;
		cursor: pointer;
	}

	.card-link:hover {
		transform: translateY(-4px);
		box-shadow: var(--shadow-xl);
		border-color: rgba(0, 102, 255, 0.3);
	}

	.card-image {
		overflow: hidden;
	}

	.card-image img {
		width: 100%;
		height: auto;
		object-fit: cover;
		transition: transform var(--transition-slow);
	}

	.card-link:hover .card-image img {
		transform: scale(1.05);
	}

	.card-content {
		padding: var(--space-6);
	}

	.card-title {
		font-family: var(--font-heading);
		font-size: var(--text-xl);
		font-weight: var(--font-bold);
		color: var(--color-neutral-900);
		margin: 0 0 var(--space-2) 0;
		line-height: var(--leading-tight);
	}

	.card-description {
		font-size: var(--text-base);
		color: var(--color-text-secondary);
		margin: 0;
		line-height: var(--leading-normal);
	}

	/* Reduced motion */
	@media (prefers-reduced-motion: reduce) {
		.card,
		.card-image img {
			transition: none;
		}
		.card-link:hover {
			transform: none;
		}
		.card-link:hover .card-image img {
			transform: none;
		}
	}
</style>
