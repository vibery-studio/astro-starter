---
/**
 * Neumorphic input component
 */
interface Props {
	type?: 'text' | 'email' | 'password' | 'tel' | 'url' | 'number';
	name: string;
	label?: string;
	placeholder?: string;
	required?: boolean;
	disabled?: boolean;
	value?: string;
	error?: string;
	class?: string;
}

const {
	type = 'text',
	name,
	label,
	placeholder,
	required = false,
	disabled = false,
	value = '',
	error,
	class: className = ''
} = Astro.props;

const inputId = `input-${name}`;
---

<div class:list={['input-group', { 'has-error': !!error }, className]}>
	{label && (
		<label for={inputId} class="input-label">
			{label}
			{required && <span class="required" aria-hidden="true">*</span>}
		</label>
	)}
	<input
		type={type}
		id={inputId}
		name={name}
		placeholder={placeholder}
		required={required}
		disabled={disabled}
		value={value}
		class="input"
		aria-invalid={error ? 'true' : undefined}
		aria-describedby={error ? `${inputId}-error` : undefined}
	/>
	{error && (
		<p id={`${inputId}-error`} class="input-error" role="alert">
			{error}
		</p>
	)}
</div>

<style>
	.input-group {
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.input-label {
		font-size: var(--text-sm);
		font-weight: var(--font-medium);
		color: var(--color-neutral-700);
	}

	.required {
		color: var(--color-error);
		margin-left: var(--space-1);
	}

	.input {
		width: 100%;
		padding: var(--space-3) var(--space-4);
		font-family: var(--font-sans);
		font-size: var(--text-base);
		color: var(--color-text);
		background: var(--color-neutral-100);
		border: none;
		border-radius: var(--radius-lg);
		box-shadow: var(--shadow-neuro-inset-light), var(--shadow-neuro-inset-dark);
		transition: box-shadow var(--transition-base);
	}

	.input::placeholder {
		color: var(--color-neutral-400);
	}

	.input:focus {
		outline: none;
		box-shadow:
			var(--shadow-neuro-inset-light),
			var(--shadow-neuro-inset-dark),
			0 0 0 3px rgba(0, 102, 255, 0.2);
	}

	.input:disabled {
		opacity: 0.6;
		cursor: not-allowed;
	}

	/* Error state */
	.has-error .input {
		box-shadow:
			var(--shadow-neuro-inset-light),
			var(--shadow-neuro-inset-dark),
			0 0 0 2px var(--color-error);
	}

	.input-error {
		font-size: var(--text-sm);
		color: var(--color-error);
		margin: 0;
	}

	/* Reduced motion */
	@media (prefers-reduced-motion: reduce) {
		.input {
			transition: none;
		}
	}
</style>
