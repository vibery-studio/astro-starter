---
/**
 * Header - Dark OLED Luxury (Tailwind)
 * Glass morphism, subtle glow effects, premium feel
 */
import { SITE_TITLE } from '../consts';
import { getPath } from '../utils/paths';

const navItems = [
	{ href: '/', label: 'Trang chủ' },
	{ href: '/#menu', label: 'Thực đơn' },
	{ href: '/about', label: 'Câu chuyện' },
	{ href: '/blog', label: 'Blog' },
];
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 py-4 transition-all duration-200 bg-[#1A1512]/0">
	<nav class="flex items-center justify-between px-4 md:px-8 lg:px-12 max-w-7xl mx-auto" aria-label="Điều hướng chính">
		<a href={getPath('/')} class="flex items-center gap-3 no-underline" aria-label={SITE_TITLE}>
			<span class="flex items-center justify-center w-9 h-9 bg-gradient-to-br from-[#A0714D] via-[#C49463] to-[#E6D5C3] rounded-lg font-display text-lg font-bold text-[#1A1512]">☕</span>
			<span class="font-display text-lg font-semibold text-[#F5EFE7] tracking-tight">{SITE_TITLE}</span>
		</a>

		<button
			class="mobile-toggle md:hidden bg-transparent border-none p-2 cursor-pointer"
			aria-label="Mở menu"
			aria-expanded="false"
			aria-controls="nav-menu"
		>
			<span class="hamburger block w-6 h-0.5 bg-white relative transition-colors"></span>
		</button>

		<ul id="nav-menu" class="nav-links hidden md:flex items-center gap-1 list-none m-0 p-0">
			{navItems.map((item) => (
				<li>
					<a href={getPath(item.href)} class="relative font-sans text-sm font-medium text-[#D4C1AC] no-underline px-4 py-2 rounded-lg transition-all duration-150 hover:text-[#F5EFE7] hover:bg-[#231E1A]/60">
						{item.label}
					</a>
				</li>
			))}
			<li class="ml-4">
				<a href={getPath('/contact')} class="inline-flex items-center gap-2 px-5 py-2 bg-[#A0714D] text-[#F5EFE7] font-sans text-sm font-medium no-underline rounded-full transition-all duration-200 shadow-[0_0_20px_rgba(160,113,77,0.4)] hover:bg-[#C49463] hover:shadow-[0_0_30px_rgba(160,113,77,0.5)] hover:-translate-y-0.5">
					<span>Ghé quán</span>
					<svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="transition-transform duration-150 group-hover:translate-x-1">
						<path d="M3.5 8H12.5M12.5 8L8.5 4M12.5 8L8.5 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</a>
			</li>
		</ul>
	</nav>
</header>

<script>
	const header = document.getElementById('main-header');

	function updateHeader() {
		if (window.scrollY > 50) {
			header?.classList.add('scrolled');
		} else {
			header?.classList.remove('scrolled');
		}
	}

	const toggle = document.querySelector('.mobile-toggle');
	const navMenu = document.getElementById('nav-menu');

	toggle?.addEventListener('click', () => {
		const expanded = toggle.getAttribute('aria-expanded') === 'true';
		toggle.setAttribute('aria-expanded', String(!expanded));
		navMenu?.classList.toggle('open');
		toggle.setAttribute('aria-label', expanded ? 'Mở menu' : 'Đóng menu');
	});

	window.addEventListener('scroll', updateHeader, { passive: true });
	updateHeader();
</script>

<style>
	header.scrolled {
		background-color: rgba(26, 21, 18, 0.9);
		backdrop-filter: blur(20px);
		border-bottom: 1px solid rgba(230, 213, 195, 0.12);
	}

	.hamburger::before,
	.hamburger::after {
		content: '';
		@apply absolute left-0 w-full h-0.5 transition-transform duration-200;
		background-color: #F5EFE7;
	}

	.hamburger::before { top: -7px; }
	.hamburger::after { top: 7px; }

	.mobile-toggle[aria-expanded="true"] .hamburger {
		@apply bg-transparent;
	}

	.mobile-toggle[aria-expanded="true"] .hamburger::before {
		transform: rotate(45deg) translate(5px, 5px);
	}

	.mobile-toggle[aria-expanded="true"] .hamburger::after {
		transform: rotate(-45deg) translate(5px, -5px);
	}

	/* Mobile menu */
	@media (max-width: 767px) {
		.nav-links {
			@apply absolute top-full left-0 right-0 flex-col gap-0 opacity-0 invisible -translate-y-2.5 transition-all duration-200;
			background-color: rgba(26, 21, 18, 0.98);
			backdrop-filter: blur(20px);
			border-top: 1px solid rgba(230, 213, 195, 0.12);
			border-bottom: 1px solid rgba(230, 213, 195, 0.12);
		}

		.nav-links.open {
			@apply opacity-100 visible translate-y-0 flex;
		}

		.nav-links li {
			@apply w-full;
		}

		.nav-links li a {
			@apply block px-4 py-4 md:px-8 rounded-none;
			border-bottom: 1px solid rgba(230, 213, 195, 0.06);
		}

		.nav-links li:last-child {
			@apply m-0 p-4 md:px-8;
		}

		.nav-links li:last-child a {
			@apply w-full justify-center border-0;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		header,
		.hamburger,
		.hamburger::before,
		.hamburger::after,
		.nav-links {
			@apply transition-none;
		}
	}
</style>
